{"version":3,"sources":["pages/Register.js"],"names":["layout","labelCol","offset","span","wrapperCol","Component","observer","history","useHistory","AuthStore","useStores","className","name","onFinish","values","setUsername","username","setPassword","password","register","then","push","catch","err","console","log","onFinishFailed","errorInfo","Item","label","rules","required","message","validator","rule","value","test","Promise","reject","length","resolve","min","Password","getFieldValue","type","htmlType"],"mappings":"uIAAA,sFAOMA,EAAS,CACXC,SAAU,CACNC,OAAQ,EAAGC,KAAM,GAErBC,WAAY,CACRD,KAAM,IAMRE,EAAYC,aAAS,WACvB,IAAMC,EAAUC,cACRC,EAAcC,cAAdD,UAoCR,OACI,yBAAKE,UAAU,eACX,4CACA,kBAAC,IAAD,iBACQX,EADR,CAEIY,KAAK,QACLC,SA1BK,SAAAC,GACbL,EAAUM,YAAYD,EAAOE,UAC7BP,EAAUQ,YAAYH,EAAOI,UAC7BT,EAAUU,WACLC,MAAK,WACFb,EAAQc,KAAK,QAEhBC,OAAM,SAACC,GACJC,QAAQC,IAAI,4BACZD,QAAQC,IAAIF,OAkBZG,eAdW,SAAAC,GACnBH,QAAQC,IAAI,UAAWE,MAef,kBAAC,IAAKC,KAAN,CACIC,MAAM,qBACNjB,KAAK,WACLkB,MAAO,CACH,CACIC,UAAU,EACVC,QAAS,wCAEb,CAAEC,UApDG,SAACC,EAAMC,GAC5B,MAAI,KAAKC,KAAKD,GAAeE,QAAQC,OAAO,gEACxCH,EAAMI,OAAS,GAAKJ,EAAMI,OAAS,GAAWF,QAAQC,OAAO,iDAC1DD,QAAQG,cAoDH,kBAAC,IAAD,OAGJ,kBAAC,IAAKZ,KAAN,CACIC,MAAM,eACNjB,KAAK,WACLkB,MAAO,CACH,CACIC,UAAU,EACVC,QAAS,kCACV,CACCS,IAAK,EACLT,QAAS,6DAIjB,kBAAC,IAAMU,SAAP,OAEJ,kBAAC,IAAKd,KAAN,CACIC,MAAM,2BACNjB,KAAK,kBACLkB,MAAO,CACH,CACIC,UAAU,EACVC,QAAS,8CAzET,SAAC,GAAuB,IAArBW,EAAoB,EAApBA,cACvB,MAAO,CACHV,UADG,SACOC,EAAMC,GAEZ,OAAIQ,EAAc,cAAgBR,EAAcE,QAAQG,UACjDH,QAAQC,OAAO,mDAyElB,kBAAC,IAAMI,SAAP,OAGJ,kBAAC,IAAKd,KAAN,CAAWjB,UAAU,cACjB,kBAAC,IAAD,CAAQiC,KAAK,UAAUC,SAAS,UAAhC,gBAULxC","file":"static/js/11.bea9f380.chunk.js","sourcesContent":["import React from 'react'\nimport { observer } from 'mobx-react';\nimport { Form, Input, Button } from 'antd';\nimport '../style/form.css'\nimport useStores from '../stores/index.js'\nimport { useHistory } from 'react-router-dom'\n\nconst layout = {\n    labelCol: {\n        offset: 3, span: 6,\n    },\n    wrapperCol: {\n        span: 6,\n    },\n};\n\n\n\nconst Component = observer(() => {\n    const history = useHistory()\n    const { AuthStore } = useStores()\n    const validateUsername = (rule, value) => {\n        if (/\\W/.test(value)) return Promise.reject('只能是数字字母下划线')\n        if (value.length < 4 || value.length > 10) return Promise.reject('长度为4～10个字符')\n        return Promise.resolve()\n    }\n\n    const validateConfirm = ({ getFieldValue }) => {\n        return {\n            validator(rule, value) {\n\n                if (getFieldValue('password') === value) return Promise.resolve();\n                return Promise.reject('两次密码不一致');\n            }\n        }\n    }\n    const onFinish = values => {\n        AuthStore.setUsername(values.username)\n        AuthStore.setPassword(values.password)\n        AuthStore.register()\n            .then(() => {\n                history.push('/')\n            })\n            .catch((err) => {\n                console.log('注册失败')\n                console.log(err)\n            })\n    };\n\n    const onFinishFailed = errorInfo => {\n        console.log('Failed:', errorInfo);\n    };\n\n\n\n\n    return (\n        <div className=\"formWrapper\">\n            <h2>注册</h2>\n            <Form\n                {...layout}\n                name=\"basic\"\n                onFinish={onFinish}\n                onFinishFailed={onFinishFailed}\n            >\n                <Form.Item\n                    label=\"用户名\"\n                    name=\"username\"\n                    rules={[\n                        {\n                            required: true,\n                            message: '请输入用户名',\n                        },\n                        { validator: validateUsername }\n                    ]}\n                >\n                    <Input />\n                </Form.Item>\n\n                <Form.Item\n                    label=\"密码\"\n                    name=\"password\"\n                    rules={[\n                        {\n                            required: true,\n                            message: '请输入密码',\n                        }, {\n                            min: 4,\n                            message: '密码不能小于4个字符'\n                        }\n                    ]}\n                >\n                    <Input.Password />\n                </Form.Item>\n                <Form.Item\n                    label=\"确认密码\"\n                    name=\"comfirmPassword\"\n                    rules={[\n                        {\n                            required: true,\n                            message: '请再次输入密码',\n                        },\n                        validateConfirm\n                    ]}\n                >\n                    <Input.Password />\n                </Form.Item>\n\n                <Form.Item className=\"formSummit\" >\n                    <Button type=\"primary\" htmlType=\"submit\" >\n                        Submit\n                </Button>\n                </Form.Item>\n            </Form>\n        </div>\n    );\n\n\n})\nexport default Component;"],"sourceRoot":""}