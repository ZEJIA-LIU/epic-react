(this["webpackJsonpepic-react"]=this["webpackJsonpepic-react"]||[]).push([[3],{101:function(e,t,n){e.exports=n(140)},103:function(e,t,n){},107:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=(n(103),n(10)),o=n.n(a),c=(n(107),n(7)),l=n(29),u=n(89),s=n.n(u),f=n(141),p=n(63),b=n(64),m=Object(p.a)((function(){var e=Object(c.f)(),t=Object(b.a)(),n=t.UserStore,r=t.AuthStore;return i.a.createElement("header",{className:"globalHeader"},i.a.createElement("img",{src:s.a,className:"headerLogo",alt:""}),i.a.createElement("nav",null,i.a.createElement(l.b,{to:"/",activeClassName:"active",exact:!0},"\u9996\u9875"),i.a.createElement(l.b,{to:"/about",activeClassName:"active",exact:!0},"\u5173\u4e8e"),i.a.createElement(l.b,{to:"/history",activeClassName:"active",exact:!0},"\u4e0a\u4f20\u5386\u53f2")),n.currentUser?i.a.createElement("div",{className:"buttonWrapper"},i.a.createElement("span",null," ",n.currentUser.attributes.username," "),i.a.createElement(f.a,{type:"primary",onClick:function(){r.logout()}},"\u6ce8\u9500")):i.a.createElement("div",{className:"buttonWrapper"},i.a.createElement(f.a,{type:"primary",onClick:function(){e.push("./login")}},"\u767b\u5f55"),i.a.createElement(f.a,{type:"primary",onClick:function(){e.push("./register")}},"\u6ce8\u518c")))}));var h=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("footer",null,"Footer"))};var g=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(7),n.e(8)]).then(n.bind(null,333))})),d=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(6),n.e(9)]).then(n.bind(null,334))})),O=Object(r.lazy)((function(){return n.e(12).then(n.bind(null,325))})),j=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,326))})),y=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,327))}));var w=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(m,null),i.a.createElement("main",null,i.a.createElement(r.Suspense,{fallback:i.a.createElement("div",null,"loading")},i.a.createElement(c.c,null,i.a.createElement(c.a,{path:"/",exact:!0,component:g}),i.a.createElement(c.a,{path:"/history",exact:!0,component:d}),i.a.createElement(c.a,{path:"/about",exact:!0,component:O}),i.a.createElement(c.a,{path:"/login",exact:!0,component:j}),i.a.createElement(c.a,{path:"/register",exact:!0,component:y})))),i.a.createElement(h,null))};n(139);o.a.render(i.a.createElement(l.a,null,i.a.createElement(w,null)),document.getElementById("root"))},64:function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(4),o=n(25),c=n(2),l=(n(46),n(1)),u=n(14),s=n.n(u);s.a.init({appId:"koH0wSSDni6NORCOQXkLRrXg-gzGzoHsz",appKey:"L3eWxyYSfIhyjfh3at4dwwWq",serverURL:"https://koh0wssd.lc-cn-n1-shared.com"});var f,p,b,m,h=function(e,t){var n=new u.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},g=function(e,t){return new Promise((function(n,r){u.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},d=function(){u.User.logOut()},O=function(){return u.User.current()},j={add:function(e,t){var n=new s.a.Object("Image"),r=new s.a.File(t,e);return n.set("filename",t),n.set("owner",u.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){e(t)}),(function(e){return t(e)}))}))},find:function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,i=void 0===r?10:r,a=new u.Query("Image");return a.include("owner"),a.limit(i),a.skip(n*i),a.descending("createdAt"),a.equalTo("owner",u.User.current()),a.descending("createdAt"),new Promise((function(e,t){a.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},delete:function(e){var t=s.a.Object.createWithoutData("Image",e);return new Promise((function(e,n){t.destroy().then((function(t){return e(t)})).catch((function(e){return console.log("\u5220\u9664\u5931\u8d25")}))}))}};window.uploader=j;var y,w,v,U,E,z,S,P,k,x,F,C,I,L,N,D,A,H,W,R,q=new(f=function e(){Object(o.a)(this,e),Object(a.a)(this,"currentUser",p,this),Object(a.a)(this,"pullUser",b,this),Object(a.a)(this,"reSetUser",m,this)},p=Object(c.a)(f.prototype,"currentUser",[l.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Object(c.a)(f.prototype,"pullUser",[l.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.currentUser=O()}}}),m=Object(c.a)(f.prototype,"reSetUser",[l.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.currentUser=null}}}),f),J=n(90),Q=(n(108),new(y=function(){function e(){Object(o.a)(this,e),Object(a.a)(this,"list",w,this),Object(a.a)(this,"isLoading",v,this),Object(a.a)(this,"hasmore",U,this),Object(a.a)(this,"page",E,this),this.limit=10}return Object(J.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;q.currentUser&&(this.isLoading=!0,j.find({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasmore=!1)})).catch((function(e){return console.log("\u6570\u636e\u52a0\u8f7d\u5931\u8d25")})).finally((function(){e.isLoading=!1,console.log(e.list)})))}},{key:"delete",value:function(e){return new Promise((function(t,n){j.delete(e).then((function(e){t(e)})).catch((function(e){return n(e)}))}))}},{key:"reSet",value:function(){this.list=[],this.isLoading=!1,this.hasmore=!0,this.page=0}}]),e}(),w=Object(c.a)(y.prototype,"list",[l.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=Object(c.a)(y.prototype,"isLoading",[l.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=Object(c.a)(y.prototype,"hasmore",[l.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=Object(c.a)(y.prototype,"page",[l.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(c.a)(y.prototype,"append",[l.f],Object.getOwnPropertyDescriptor(y.prototype,"append"),y.prototype),Object(c.a)(y.prototype,"find",[l.f],Object.getOwnPropertyDescriptor(y.prototype,"find"),y.prototype),Object(c.a)(y.prototype,"delete",[l.f],Object.getOwnPropertyDescriptor(y.prototype,"delete"),y.prototype),Object(c.a)(y.prototype,"reSet",[l.f],Object.getOwnPropertyDescriptor(y.prototype,"reSet"),y.prototype),y)),X=new(z=function e(){Object(o.a)(this,e),Object(a.a)(this,"values",S,this),Object(a.a)(this,"setUsername",P,this),Object(a.a)(this,"setPassword",k,this),Object(a.a)(this,"login",x,this),Object(a.a)(this,"register",F,this),Object(a.a)(this,"logout",C,this)},S=Object(c.a)(z.prototype,"values",[l.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{password:"",username:""}}}),P=Object(c.a)(z.prototype,"setUsername",[l.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.values.username=t}}}),k=Object(c.a)(z.prototype,"setPassword",[l.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return[e.values.password=t]}}}),x=Object(c.a)(z.prototype,"login",[l.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return new Promise((function(t,n){g(e.values.username,e.values.password).then((function(e){q.pullUser(),t(e)})).catch((function(e){q.reSetUser(),n(e)}))}))}}}),F=Object(c.a)(z.prototype,"register",[l.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return new Promise((function(t,n){h(e.values.username,e.values.password).then((function(e){q.pullUser(),t(e)})).catch((function(e){q.reSetUser(),n(e)}))}))}}}),C=Object(c.a)(z.prototype,"logout",[l.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){q.reSetUser(),d(),Q.reSet()}}}),z),B=n(142),G=new(I=function e(){Object(o.a)(this,e),Object(a.a)(this,"file",L,this),Object(a.a)(this,"filename",N,this),Object(a.a)(this,"isUploading",D,this),Object(a.a)(this,"serverFile",A,this),Object(a.a)(this,"setFilename",H,this),Object(a.a)(this,"setFile",W,this),Object(a.a)(this,"upload",R,this)},L=Object(c.a)(I.prototype,"file",[l.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=Object(c.a)(I.prototype,"filename",[l.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=Object(c.a)(I.prototype,"isUploading",[l.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=Object(c.a)(I.prototype,"serverFile",[l.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=Object(c.a)(I.prototype,"setFilename",[l.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.filename=t}}}),W=Object(c.a)(I.prototype,"setFile",[l.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.file=t}}}),R=Object(c.a)(I.prototype,"upload",[l.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.isUploading=!0,e.serverFile=null,new Promise((function(t,n){j.add(e.file,e.filename).then((function(n){t(n),e.serverFile=n}),(function(e){B.b.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){return e.isUploading=!1}))}))}}}),I),K=i.a.createContext({AuthStore:X,UserStore:q,ImageStore:G,HistoryStore:Q});window.store={AuthStore:X,UserStore:q,ImageStore:G,HistoryStore:Q};t.a=function(){return i.a.useContext(K)}},89:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"}},[[101,4,5]]]);
//# sourceMappingURL=main.f0be1d21.chunk.js.map